<template>
    <div class="page">
        <div class="navbar">
            <div style="text-align: center; margin-top: 4px;"><img src="img/key.png" width="60px" /></div>
            <div class="navbar-inner sliding">
                <div class="left">
                    <a href="#" onclick="regresar();" class="link back">
                        <i class="icon icon-back"></i>
                        <span class="if-not-md">Back</span>
                    </a>
                </div>
            </div>
        </div>
        <div class="page-content">
            <div style="text-align: center; justify-content:center; margin-right:auto; margin-left:auto; width: 99%;">
                <h2 style="color:#00008B;">Tablero de ventas</h2>
                <div class="infinite-scroll-content">
                    <table id="TablaVenta" style="text-align: center;" FRAME="void" RULES="rows">
                        <header>
                            <style>
                                table {border-collapse: collapse;width: 100%; border-color: #3590FA;}
                                th, td {text-align: center;padding: 8px;}
                                .proy{background-color: #30B65E}
                                tr:nth-child(even){background-color: #f2f2f2}
                                th {background-color: #3590FA;color: white;}
                            </style>
                        </header>
                        <tr>
                            <th scope="row"></th>
                            <th style="text-align: center;">⠀⠀⠀Censo⠀⠀⠀</th>
                            <th style="text-align: center;">⠀⠀Contacto⠀⠀</th>
                            <th style="text-align: center;">Presentaci\u00f3n del producto</th>
                            <th style="text-align: center;">⠀⠀⠀⠀LIP⠀⠀⠀⠀</th>
                            <th style="text-align: center;">AD (Analisis - Diagnostico)</th>
                            <th style="text-align: center;">⠀⠀⠀Prueba⠀⠀⠀</th>
                            <th style="text-align: center;">Presentaci\u00f3n de la propuesta</th>
                            <th style="text-align: center;">Negociaci\u00f3n</th>
                            <th style="text-align: center;">⠀⠀⠀Convenio⠀⠀⠀</th>
                            <th style="text-align: center;">⠀⠀⠀Cierre⠀⠀⠀</th>
                            <th style="text-align: center;">Presentaci\u00f3n del asesor a cliente nuevo</th>
                        </tr>
                        <tbody id="pro">
                        </tbody>
                    </table>
                    <br /><br /><br />
               <div class='sentencia preloader color-blue infinite-scroll-preloader'></div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
    return {
        on: {
            pageInit: function (e, page) {
                var IdU = localStorage.getItem("IdUsuario");
                app.request.get('http://www.appbennetts.com/VIC/ProcesosVIC7/ConsultaTablaProyectos.php', { IdUsuario: IdU}, function (data) {
                        $('.sentencia').remove();
                        var content = JSON.parse(data);
                        var color = "";
                        for(var x=0; x < content.length; x++){
                            if(content[x].uno !='' && content[x].uno != null){
                                var color1 = "#dfdfff";
                            }else{
                                var color1 = "#FFF"
                            }
                            if(content[x].dos !='' && content[x].dos != null){
                                var color2 = "#bfbfff";
                            }else{
                                var color2 = "#FFF"
                            }
                            if(content[x].tres !='' && content[x].tres != null){
                                var color3 = "#9f9fff";
                            }else{
                                var color3 = "#FFF"
                            }
                            if(content[x].cuatro !='' && content[x].cuatro != null){
                                var color4 = "#7f7fff";
                            }else{
                                var color4 = "#FFF"
                            }
                            if(content[x].cinco !='' && content[x].cinco != null){
                                var color5 = "#5f5fff";
                            }else{
                                var color5 = "#FFF"
                            }
                            if(content[x].seis !='' && content[x].seis != null){
                                var color6 = "#3f3fff";
                            }else{
                                var color6 = "#FFF"
                            }
                            if(content[x].siete !='' && content[x].siete != null){
                                var color7 = "#1f1fff";
                            }else{
                                var color7 = "#FFF"
                            }
                            if(content[x].ocho !='' && content[x].ocho != null){
                                var color8 = "#0000ff";
                            }else{
                                var color8 = "#FFF"
                            }
                            if(content[x].nueve !='' && content[x].nueve != null){
                                var colo9 = "#0000bf";
                            }else{
                                var color9 = "#FFF"
                            }
                            if(content[x].diez !='' && content[x].diez != null){
                                var color10 = "#00009f";
                            }else{
                                var color10 = "#fff";
                            }
                            if(content[x].once !='' && content[x].once != null){
                                var color11 = "#00009f";
                            }else{
                                var color11 = "#FFF";
                            }


                            $("#TablaVenta #pro").append("<tr><th class='proy'>"+content[x].NombreProyecto+"</th><td style='background-color:"+color1+"; color: #fff;'>⠀</td><td  style='background-color:"+color2+"; color: #fff;'>⠀</td><td style='background-color:"+color3+";'>⠀</td><td style='background-color:"+color4+"; color: #fff;'>⠀</td><td style='background-color:"+color5+"' style='color:#fff;'>⠀</td><td style='background-color:"+color6+"; color: #fff;'>⠀</td><td style='background-color:"+color7+"; color: #fff;'>⠀</td><td style='background-color:"+color8+"; color: #fff;'>⠀</td><td style='background-color:"+color9+"; color: #fff;'>⠀</td><td style='background-color:"+color10+"; color: #fff;'>⠀</td><td style='background-color:"+color11+"; color: #fff;'>⠀</td></tr>");
                        }

                        $('.preloader').remove();
                        $('.infinite-scroll-preloader').remove();

                });
            }
        }
    }
</script>